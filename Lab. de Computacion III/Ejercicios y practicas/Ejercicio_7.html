<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicio 7</title>
</head>
<body>
    <h2>Tareas</h2>
    <p>Borrar: Haciendo doble click en la tarea, se eliminara.</p>
	<p>
		<input type="text" id="tareaInput" placeholder="Agrega tu tarea">
		<input type="button" class="boton" id="btn-agregar" value="Agregar Tarea">
    </p>
	<ul class="lista" id="lista">
	</ul>
		
<script>
   (function(){
	// Variables
	var lista = document.getElementById("lista");
		tareaInput = document.getElementById("tareaInput");
		btnNuevaTarea = document.getElementById("btn-agregar");

	// Funciones
	var agregarTarea = function(){
		var tarea = tareaInput.value,
			nuevaTarea = document.createElement("li");
			enlace = document.createElement("a");
			contenido = document.createTextNode(tarea);
            newCheckBox = document.createElement('input');
            newCheckBox.type = "checkbox";
        
		if (tarea === "") {
			tareaInput.setAttribute("placeholder", "Agrega una tarea valida");
			tareaInput.className = "error";
			return false;
		}

		// Agregamos el contenido al enlace
		enlace.appendChild(contenido);
		// Le establecemos un atributo href
		enlace.setAttribute("href", "#");
		// Agrergamos el enlace (a) a la nueva tarea (li)
		nuevaTarea.appendChild(enlace);
		// creamos el checkbox
		lista.appendChild(nuevaTarea);
        lista.appendChild(newCheckBox);

		tareaInput.value = "";
    
		for (var i = 0; i <= lista.children.length -1; i++) {
			lista.children[i].addEventListener("dblclick", function(){
				this.parentNode.removeChild(this);
			});  
        }        
	};
    
	var eleminarTarea = function(){
		this.parentNode.removeChild(this);
	};

	// Agregar Tarea
	btnNuevaTarea.addEventListener("click", agregarTarea);
	// Borrando Elementos de la lista
	for (var i = 0; i <= lista.children.length -1; i++) {
		lista.children[i].addEventListener("dblclick", eleminarTarea);
	}
}());
</script>
</html>